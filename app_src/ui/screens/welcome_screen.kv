#:import get_color_from_hex kivy.utils.get_color_from_hex



<MyLabel>:
    theme_font_name:"Custom"
    theme_font_size:"Custom"
    theme_bg_color:"Custom"
    theme_text_color:"Custom"
    font_name: "RobotoMono"
#    md_bg_color:[1,0,0,1]
#    bg_color:[1,0,0,1]
    size_hint: [None,None]
    size: self.texture_size
#    canvas:
#        Color:
#            rgba: 1, 0, 0, .5  # red
#        Rectangle:
#            pos: self.pos
#            size: self.size

<Circle@MDBoxLayout>:
    size_hint: None, None
    size: 40, 40
    radius: 50
    md_bg_color: 116/255, 155/255, 215/255, 1
    pos_hint: {"top": 1}

<Paint@BoxLayout>
    canvas:
        Color:
            rgba: 1, 0, 0, .5  # red
        Rectangle:
            pos: self.pos
            size: self.size
<NotificationRequestLayout>:
    rows: 4
    padding: dp(25), dp(60), dp(25), dp(20)
    spacing: dp(50)
    md_bg_color: [0.9, 0.9, 0.9, 1] if root.is_device_theme_light else get_color_from_hex("#1A1B1B")

    # Header
    MDBoxLayout:
        orientation: "vertical"
        spacing: dp(10)
#        adaptive_height: True
        size_hint: [None,None]
        size: self.minimum_size
#        md_bg_color:[1,0,1,1]
        MyLabel:
            text: "Turn On\nNotifications?"
            bold: True
#            color: [1,0,0,1]
            color: root.text_color_primary_light if root.is_device_theme_light else root.text_color_primary_dark
            theme_font_size:"Custom"
            font_size: sp(36)
            adaptive_size: True
            theme_bg_color:"Custom"
            halign:"left"

            size_hint: [None,None]
            size: self.texture_size


        MDLabel:
            text:"To keep Carousel running in the\nbackground, Android requires a\nforeground notification"
            color: root.text_color_secondary_light if root.is_device_theme_light else root.text_color_secondary_dark
            theme_font_size:"Custom"
            font_size: sp(14)
            theme_font_name:"Custom"
            font_name: "RobotoMono"
            adaptive_size: True
            halign:"left"
            size_hint: [None,None]
            size: self.texture_size
    # Middle Section
    MDBoxLayout:
        orientation: "vertical"
        size_hint: 1, None
        height: self.minimum_height
#        adaptive_height: True
        spacing: dp(10)
        padding: dp(10)
        md_bg_color: [183 / 255, 212 / 255, 227 / 255, 1] if root.is_device_theme_light else get_color_from_hex("#1C6B92")
        radius: dp(8)

        RotatedLayout:
            pos_hint: {"center_x": .9}
#            md_bg_color: 1, 0, 1, 1


            Image:
                source: "assets/icons/bell.png"
                size_hint: None, None
                size: dp(100), dp(100)
                pos_hint: {"center_x": .5, "center_y": .5}

        MDBoxLayout:
            adaptive_height:True
            spacing: dp(5)
            MDIcon:
                icon: "checkbox-blank-circle"
                theme_text_color:"Custom"
                text_color: root.text_color_primary_light if root.is_device_theme_light else root.text_color_primary_dark
                adaptive_size: True
                pos_hint:{'center_y': .5}
                theme_font_size:"Custom"
                font_size: sp(6)

            MyLabel:
                text: "Additional Features"
                bold: True
                color: root.text_color_primary_light if root.is_device_theme_light else root.text_color_primary_dark
                adaptive_size: True
                size_hint: [None,None]
                size: self.texture_size
        MDBoxLayout:
            adaptive_height:True
            MDLabel:
                text: "See whatâ€™s coming and skip images without opening app"
                size_hint_x:1
                adaptive_height:1
                theme_font_size:"Custom"
                font_size: sp(14)
                theme_font_name:"Custom"
                font_name: "RobotoMono"
                color: root.text_color_secondary_light if root.is_device_theme_light else root.text_color_secondary_dark


#        # Notification Card
        MDBoxLayout:
            adaptive_height: True
            spacing: dp(10)
            padding: dp(10)
            radius: dp(20),
            md_bg_color: [1, 1, 1, 1] if root.is_device_theme_light else get_color_from_hex("222020")

            Circle:

            MDBoxLayout:
                orientation: "vertical"
                adaptive_size: True
                spacing: dp(10)
                pos_hint:{'top': 1}
                size_hint_x:1
#                md_bg_color:[0,1,0,1]

                MDBoxLayout:
                    adaptive_size: True
                    spacing: dp(5)

                    MyLabel:
                        text: "Waller"
                        font_size: sp(14)
                        adaptive_size: True
                        color: root.text_color_secondary_light if root.is_device_theme_light else root.text_color_secondary_dark

                    MDIcon:
                        icon: "checkbox-blank-circle"
                        theme_text_color:"Custom"
                        color: root.text_color_secondary_light if root.is_device_theme_light else root.text_color_secondary_dark
                        adaptive_size: True
                        pos_hint:{'center_y': .5}
                        theme_font_size:"Custom"
                        font_size: sp(6)

                    MyLabel:
                        text: "20m"
                        font_size: sp(14)
                        adaptive_size: True
                        text_color: root.text_color_secondary_light if root.is_device_theme_light else root.text_color_secondary_dark

                MyLabel:
                    text: "Next in 1:26"
                    font_size: sp(14)
                    adaptive_size: True
                    color: root.text_color_primary_light if root.is_device_theme_light else root.text_color_primary_dark

                MDBoxLayout:
                    md_bg_color:get_color_from_hex("#EAE9E9") if root.is_device_theme_light else get_color_from_hex("#565252")
                    adaptive_size:1
                    padding: dp(6), dp(4)
                    radius: dp(4)
                    MyLabel:
                        text: "Skip"
                        font_size: sp(14)
                        adaptive_size: True
                        color: (46/255, 95/255, 169/255, 1) if root.is_device_theme_light else get_color_from_hex("C3DBFF")
#                    canvas.before:
#                        Color:
#                            rgba:
#                        Rectangle:
#                            pos: self.pos
#                            size: self.size

            MDBoxLayout:
                adaptive_size: True
                pos_hint: {"top": .95}
                radius: dp(5),
                md_bg_color: 161/255, 163/255, 172/255, 1

                FitImage:
                    source: "assets/icons/mountain.png"
                    size_hint: None, None
                    size: dp(60), dp(60)
                    radius: dp(5)

            MDBoxLayout:
                adaptive_size: True
                radius: dp(50)
                md_bg_color: (226/255, 223/255, 223/255, 1) if root.is_device_theme_light else get_color_from_hex("#575656")
                pos_hint: {"top": 1, "right": 1}

                MDIcon:
                    icon: "chevron-up"
                    text_color: (0, 0, 0, 1) if root.is_device_theme_light else get_color_from_hex("#EFEAEA")

    # Bottom Buttons
    MDBoxLayout:
        orientation: "vertical"
        spacing: dp(10)

        MyRoundButton:
            text: "Enable notifications"
            bg_color: [55/255, 151/255, 252/255, 1] if root.is_device_theme_light else get_color_from_hex("#2A92FF")
            back_layer_bg_color: [1,1,1,1] if root.is_device_theme_light else get_color_from_hex("#FEFEFE")
            size_hint_y: None
            height: dp(48)
            font_size: sp(16)
            on_release: root.enable_notifications()

        MyRoundButton:
            text: "Skip Feature"
            bg_color: [243/255, 170/255, 170/255, 1] if root.is_device_theme_light else get_color_from_hex("#FF3F3F")
            back_layer_bg_color: [1,1,1,1] if root.is_device_theme_light else get_color_from_hex("#FEFEFE")
            color: 0, 0, 0, 1
            size_hint: None, None
            size: sp(248), dp(44)
            font_size: dp(14)
            pos_hint: {"center_x": .5}
            on_release: root.skip_feature()


